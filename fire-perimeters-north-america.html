<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>North America WUI - Wildland Urban Interface</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #1A1A1A; }
    #map { width: 1200px; height: 800px; }
    .leaflet-popup-content-wrapper {
        background: #1A1A1AEE; color: #FFF;
        border: 1px solid #E8712B; border-radius: 4px;
        font-family: 'Open Sans', sans-serif;
    }
    .leaflet-popup-tip { background: #1A1A1AEE; }
</style>
</head>
<body>
<div id="map"></div>
<div id="map-title" style="
    position: absolute; top: 15px; left: 60px; z-index: 1000;
    background: #1A1A1ADD; color: #FFF;
    padding: 12px 24px; border-radius: 4px;
    font-family: 'Montserrat', sans-serif; font-size: 18px; font-weight: 700;
    border-left: 4px solid #E8712B; pointer-events: none;
">Wildfire Risk & Historic Burns â€” North America</div>

<div id="stats-box" style="
    position: absolute; bottom: 40px; left: 20px; z-index: 1000;
    background: #1A1A1ADD; color: #FFF;
    padding: 14px 20px; border-radius: 4px;
    font-family: 'Open Sans', sans-serif; font-size: 13px;
    border-left: 3px solid #E8712B; max-width: 360px; line-height: 1.6;
">
    <div style="font-family: 'Montserrat', sans-serif; font-weight: 700; color: #E8712B; margin-bottom: 8px; font-size: 14px;">THE SCALE OF THE PROBLEM</div>
    <div><span style="color: #E8712B; font-weight: 700;">46M+</span> homes in US WUI (USFS 2020)</div>
    <div><span style="color: #E8712B; font-weight: 700;">3.9M</span> homes in Canadian WUI zones</div>
    <div><span style="color: #E8712B; font-weight: 700;">$10B+</span> annual wildfire damage (N. America)</div>
    <div><span style="color: #E8712B; font-weight: 700;">6.9%</span> faster WUI growth vs urban (Stats Can)</div>
    <div style="margin-top: 8px; font-size: 11px; color: #999;">
        <span style="display:inline-block;width:12px;height:12px;background:#8B0000;margin-right:4px;vertical-align:middle;border-radius:2px;opacity:0.7;"></span>Historic Fire Perimeters (Canada 1980-2021)
        <br>
        <span style="display:inline-block;width:12px;height:12px;background:#E8712B;margin-right:4px;vertical-align:middle;border-radius:2px;"></span>Major WUI Communities at Risk
    </div>
</div>

<script>
(function() {
    var map = L.map('map', {
        center: [52, -110],
        zoom: 4,
        zoomControl: true
    });

    // Dark basemap
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; CartoDB',
        maxZoom: 19
    }).addTo(map);

    // CWFIS Historic Fire Perimeters (Canada) - WMS layer
    L.tileLayer.wms('https://cwfis.cfs.nrcan.gc.ca/geoserver/public/wms', {
        layers: 'NFDB_MRB',
        format: 'image/png',
        transparent: true,
        opacity: 0.5,
        attribution: 'Fire data: NRCan CWFIS'
    }).addTo(map);

    // NIFC US fire perimeters via ArcGIS (recent years)
    // Using NIFC interagency fire perimeters
    var nifc = L.tileLayer('https://tiles.arcgis.com/tiles/jIL9msH9OI208GCb/arcgis/rest/services/WFIGS_Interagency_Perimeters/MapServer/tile/{z}/{y}/{x}', {
        opacity: 0.5,
        attribution: 'US Fires: NIFC',
        maxZoom: 16
    });
    // Add if it works, silent fail if not
    nifc.on('tileerror', function() {});
    nifc.addTo(map);

    // Key WUI communities across North America
    var communities = [
        // Canada
        {lat: 49.883, lng: -119.496, name: "Kelowna, BC", detail: "$720M damage (2023 fires)", type: "canada"},
        {lat: 50.233, lng: -121.581, name: "Lytton, BC", detail: "Destroyed 2021 - $102M", type: "canada"},
        {lat: 56.726, lng: -111.379, name: "Fort McMurray, AB", detail: "$9.9 BILLION damage (2016)", type: "canada"},
        {lat: 62.454, lng: -114.372, name: "Yellowknife, NWT", detail: "Full evacuation 2023", type: "canada"},
        {lat: 58.789, lng: -122.760, name: "Fort Nelson, BC", detail: "Evacuated 2024", type: "canada"},
        {lat: 53.917, lng: -122.750, name: "Prince George, BC", detail: "Growing WUI exposure", type: "canada"},
        {lat: 51.648, lng: -120.846, name: "100 Mile House, BC", detail: "Evacuated 2017", type: "canada"},
        {lat: 50.671, lng: -120.323, name: "Kamloops, BC", detail: "Repeated WUI fire threat", type: "canada"},
        {lat: 51.178, lng: -115.571, name: "Canmore, AB", detail: "WUI intermix high risk", type: "canada"},
        // US
        {lat: 34.141, lng: -118.256, name: "Los Angeles, CA", detail: "Palisades Fire 2025 - $30B+", type: "us"},
        {lat: 39.737, lng: -121.858, name: "Paradise, CA", detail: "Camp Fire 2018 - $16.5B, 85 deaths", type: "us"},
        {lat: 39.577, lng: -105.028, name: "Superior/Louisville, CO", detail: "Marshall Fire 2021 - $2B", type: "us"},
        {lat: 32.831, lng: -116.766, name: "San Diego County, CA", detail: "Repeated WUI fire events", type: "us"},
        {lat: 44.058, lng: -121.315, name: "Bend, OR", detail: "Growing WUI expansion", type: "us"},
        {lat: 35.598, lng: -106.094, name: "Santa Fe, NM", detail: "Hermits Peak/Calf Canyon 2022", type: "us"},
        {lat: 36.778, lng: -119.418, name: "Central Valley, CA", detail: "WUI interface corridor", type: "us"},
    ];

    communities.forEach(function(c) {
        var color = c.type === 'canada' ? '#E8712B' : '#FF6347';
        var icon = L.divIcon({
            html: '<svg width="20" height="20" viewBox="0 0 20 20">' +
                '<circle cx="10" cy="10" r="8" fill="' + color + '" fill-opacity="0.85" stroke="#FFF" stroke-width="1.5"/>' +
                '</svg>',
            iconSize: [20, 20], iconAnchor: [10, 10], popupAnchor: [0, -10], className: ''
        });

        L.marker([c.lat, c.lng], {icon: icon})
            .bindPopup('<div style="font-family:Open Sans,sans-serif;">' +
                '<b style="color:#E8712B;font-size:14px;">' + c.name + '</b><br>' +
                c.detail + '</div>')
            .addTo(map);
    });
})();
</script>
</body>
</html>
